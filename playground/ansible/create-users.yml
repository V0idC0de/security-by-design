---
# yaml-language-server: $schema=https://raw.githubusercontent.com/ansible/ansible-lint/main/src/ansiblelint/schemas/ansible.json#/$defs/playbook
- hosts: all
  become: true

  vars_files:
    - vars/settings.yaml

  vars:
    # lab_users: []
    # reset_password: true
    # force_sshd_configuration: true
    # sshd_container_name: ...

  roles:
    - role: lab-users
    - role: sshd-lab-users
      vars:
        sshd_lab_users: "{{ lab_users if force_sshd_configuration else lab_os_users_changed | default([], true) }}"
